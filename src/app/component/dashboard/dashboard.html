<div class="dashboard">
  <header class="top-bar">
    <div class="top-left">
      <div class="logo-mark">AI</div>
      <div>
        <h1>AI Overview</h1>
        <p class="top-subtitle">Todayâ€™s summary of your models and activity.</p>
      </div>
    </div>
    <div class="top-right">
      <div class="search">
        <span class="search-icon">ğŸ”</span>
        <input placeholder="Search models, datasets, runsâ€¦" />
      </div>
      <button class="top-btn" routerLink="/upload">Upload Resume</button>
      <div class="avatar">J</div>
    </div>
  </header>

  <main class="content">
    <section class="stats-row">
      <article class="stat-card primary">
        <div class="stat-header">
          <span class="stat-label">Active models</span>
          <span class="stat-pill">Live</span>
        </div>
        <div class="stat-value">12</div>
        <p class="stat-meta">+3 added this week</p>
      </article>

      <article class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Requests / min</span>
        </div>
        <div class="stat-value">4.2k</div>
        <p class="stat-meta">Stable in the last 15 minutes</p>
      </article>

      <article class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Latency (p95)</span>
        </div>
        <div class="stat-value">142ms</div>
        <p class="stat-meta success">-18% vs yesterday</p>
      </article>

      <article class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Error rate</span>
        </div>
        <div class="stat-value">0.4%</div>
        <p class="stat-meta warning">Slightly above target</p>
      </article>
    </section>

    <section class="main-grid">
      <article class="panel resumes">
        <div class="panel-header">
          <h2>Your Resumes</h2>
          <button class="ghost-btn" routerLink="/upload">+ Upload New</button>
        </div>
        @if (loading) {
          <div class="loading-state">
            <p>Loading resumes...</p>
          </div>
        } @else if (resumes.length === 0) {
          <div class="empty-state">
            <div class="empty-icon">ğŸ“„</div>
            <h3>No resumes uploaded yet</h3>
            <p>Upload your first resume to get AI-powered insights</p>
            <button class="primary-action-btn" routerLink="/upload">Upload Resume</button>
          </div>
        } @else {
          <div class="resumes-grid">
            @for (resume of resumes; track resume._id) {
              <div class="resume-card" (click)="viewAnalysis(resume._id)">
                <div class="resume-card-header">
                  <div class="resume-icon">ğŸ“„</div>
                  <button class="delete-btn" (click)="deleteResume(resume._id, $event)">âœ•</button>
                </div>
                <h3 class="resume-name">{{ resume.originalName }}</h3>
                <div class="resume-score">
                  <div class="score-circle-small" [style.border-color]="getScoreColor(resume.analysis.atsScore)">
                    <span>{{ resume.analysis.atsScore }}</span>
                  </div>
                  <div class="score-info-small">
                    <p class="score-label-small">ATS Score</p>
                    <p class="score-status">{{ getScoreLabel(resume.analysis.atsScore) }}</p>
                  </div>
                </div>
                <div class="resume-meta">
                  <span class="meta-item">ğŸ“… {{ resume.uploadedAt | date:'short' }}</span>
                  <span class="meta-item">ğŸ’¼ {{ resume.analysis.experience.years }}+ years</span>
                </div>
                <div class="resume-skills">
                  @for (skill of resume.analysis.skills.slice(0, 3); track skill.name) {
                    <span class="skill-tag">{{ skill.name }}</span>
                  }
                  @if (resume.analysis.skills.length > 3) {
                    <span class="skill-tag more">+{{ resume.analysis.skills.length - 3 }} more</span>
                  }
                </div>
              </div>
            }
          </div>
        }
      </article>

      <article class="panel activity">
        <div class="panel-header">
          <h2>Quick Stats</h2>
        </div>
        @if (resumes.length > 0) {
          <div class="quick-stats">
            <div class="quick-stat-item">
              <div class="quick-stat-value">{{ resumes.length }}</div>
              <div class="quick-stat-label">Resumes Analyzed</div>
            </div>
            <div class="quick-stat-item">
              <div class="quick-stat-value">{{ getAverageScore() }}</div>
              <div class="quick-stat-label">Avg ATS Score</div>
            </div>
            <div class="quick-stat-item">
              <div class="quick-stat-value">{{ getTotalSkills() }}</div>
              <div class="quick-stat-label">Total Skills</div>
            </div>
          </div>
        } @else {
          <div class="empty-stats">
            <p>Upload resumes to see your statistics</p>
          </div>
        }
      </article>
    </section>
  </main>
</div>
